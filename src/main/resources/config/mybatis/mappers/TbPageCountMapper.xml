<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.silita.biaodaa.dao.TbPageCountMapper" >
  <resultMap id="BaseResultMap" type="com.silita.biaodaa.model.TbPageCount" >
    <!--
      WARNING - @mbg.generated
    -->
    <id column="pkid" property="pkid" jdbcType="INTEGER" />
    <result column="page" property="page" jdbcType="VARCHAR" />
    <result column="page_count" property="pageCount" jdbcType="INTEGER" />
    <result column="description" property="description" jdbcType="VARCHAR" />
    <result column="updated" property="updated" jdbcType="TIMESTAMP" />
    <result column="created" property="created" jdbcType="TIMESTAMP" />
  </resultMap>

  <!--添加页面统计-->
  <insert id="insertPageCount" parameterType="com.silita.biaodaa.model.TbPageCount">
      INSERT INTO `tb_page_count` (
        `page`,
        `page_count`,
        `description`,
        `created`
      )
      VALUES
        (
          #{page},
          #{pageCount},
          #{description},
          now()
        ) ;
  </insert>

  <!--修改页面统计-->
  <update id="updatePageCount" parameterType="com.silita.biaodaa.model.TbPageCount">
      UPDATE
        `tb_page_count`
      SET
        `page_count` = page_count + 1,
        `updated` = now()
      WHERE `pkid` = #{pkid}
  </update>

  <!--根据页面查询主键-->
  <select id="queryPkidPage" parameterType="java.lang.String" resultType="java.lang.Integer">
      SELECT IFNULL(t.`pkid`,0) FROM tb_page_count t WHERE t.`page` = #{page}
  </select>
</mapper>