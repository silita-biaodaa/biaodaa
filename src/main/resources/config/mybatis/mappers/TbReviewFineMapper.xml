<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.silita.biaodaa.dao.TbReviewFineMapper">
    <resultMap id="BaseResultMap" type="com.silita.biaodaa.model.TbReviewFine">
        <!--
          WARNING - @mbg.generated
        -->
        <id column="pkid" property="pkid" jdbcType="INTEGER"/>
        <result column="com_id" property="comId" jdbcType="VARCHAR"/>
        <result column="proj_name" property="projName" jdbcType="VARCHAR"/>
        <result column="issued" property="issued" jdbcType="VARCHAR"/>
        <result column="award_name" property="awardName" jdbcType="VARCHAR"/>
        <result column="type" property="type" jdbcType="VARCHAR"/>
        <result column="updated" property="updated" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!--查询考评优良-->
    <select id="queryReviewFineList" parameterType="java.util.Map" resultType="java.util.Map">
        SELECT
          t.`proj_name` AS projName,
          t.`issued` AS issued,
          t.`award_name` AS awardName
        FROM
          tb_review_fine t
        WHERE t.`com_id` = #{comId}
          AND t.`type` = #{type}
        <choose>
            <when test="type == 'project'">
                AND t.`proj_name` is not NULL
                AND t.`proj_name` != ''
                LIMIT 15
            </when>
            <otherwise>
                ORDER BY t.`issued` DESC
                LIMIT 1
            </otherwise>
        </choose>
  </select>
</mapper>